# gitignore

## 翻訳元原文

<https://github.com/git/git/blob/master/Documentation/gitignore.txt>

## 翻訳した仕様

gitignore

### NAME

gitignore - 意図的に追跡したくないファイルを指定する。

### SYNOPSIS

`$XDG_CONFIG_HOME/git/ignore`, `$GIT_DIR/info/exclude`, `.gitignore`

### DESCRIPTION

`gitignore`ファイルはGitが無視するべき意図的な追跡対象外ファイルを指定する。
gitがすでに追跡済みとしているファイルには影響を与えない。後述のNOTESを参照すること。

gitignoreファイルの各行は特定のパターンを指定する。
あるパスが無視されるか決定する時、Gitは通常、複数のソースから取得したgitignoreパターンを、次の順に従って確認する。
(あるレベルで処理が決まっても、後続の決定で上書きされ、最後にマッチしたパターンの結果を優先する。)

- gitignoreをサポートするコマンドの、コマンドラインから読み込んだパターン
- パスと同じか、それより上位の親ディレクトリ(ワーキングツリーのトップレベルまで)に存在する、`.gitignore`ファイルから読み込んだパターン。上位ディレクトリのパターンは、より深い（下位ディレクトリに記載されている）パターンで上書きされる。`.gitignore`ファイルから読み込むパターンは、その`.gitignore`ファイルからの相対パス基準で判定する。通常、プロジェクトにはそのような`.gitignore`ファイルを含んでおり、プロジェクトのビルドの結果として生成されるパターンなどを含みます。
- `$GIT_DIR/info/exclude`から読み込んだパターン
- 設定値`core.excludesFile`で指定したファイルから読み込んだパターン

どのパターンをどのファイルに記載するかは、使用目的により異なります。

- バージョン管理の都合上無視したいファイルで、これをcloneした他の開発者も同様に無視してほしいパターン（つまり、このgitリポジトリを利用するすべての開発者が無視したいパターン）は、`.gitignore`ファイルに記載するべきです。
- 特定のgitリポジトリ上で無視したいファイルではあるが、他者と共有する必要がないファイル（例えば、リポジトリ内に存在するが、特定のユーザーのワークフローに固有の補助ファイル）は、`$GIT_DIR/info/exclude`ファイルに記載するべきです。
- 全てのシチュエーションでGitに無視してほしいパターン（例えば、あるユーザーのエディタによって作成されるバックアップ/一時ファイル）は、ユーザーの`~/.gitconfig`の設定値`core.excludesFile`で指定されるファイルに記載するべきです。デフォルト値は`$XDG_CONFIG_HOME/git/ignore`です。もし`$XDG_CONFIG_HOME`が設定されていないか空文字の場合、`$HOME/.config/git/ignore`が代わりに使われます。

`git ls-files`や`git read-tree`等の、低レベルのGit配管ツールでは、コマンドラインオプションやコマンドラインオプションで指定したファイルからも`gitignore`パターンを読み込みます。
`git status`や`git add`等の高レベルGitツールでは、通常は上記のソース（`.gitignore`ファイル等）からの`gitignore`パターンを読み込みます。

### PATTERN FORMAT

- 空行はどのファイルにもマッチしません。そのため、可読性のためのセパレーターとして利用できます。
- `#`から始まる行はコメントを意味します。直前にバックスラッシュ`\`を配置することで、#から始まる無視パターンを記述できます。
- バックスラッシュ`\`でエスケープされていない限り、末尾の余計な空白は無視されます。
- オプションプレフィックス`!`は、否定パターンを表します。これよりも先に別のパターンによって無視されたファイルが`!`で指定したパターンに一致した場合、先の結果を上書きして追跡対象とします。ただし、このパターン対象ファイルのいずれかの親ディレクトリが無視されている場合は、上書きすることはできません。Gitはパフォーマンス上の理由から、ディレクトリを除外した場合はその中のファイルをのちの否定表現で上書きすることを許可しません。最初の`!`の前にバックスラッシュ`\`を配置した場合は、`!`リテラルから始まるパターンを表現します。例えば、`\!important!.txt`は`!important!.txt`というgitignoreパターンを示します。
- スラッシュ`/`はディレクトリセパレータとして使います。セパレータはパターンの最初・中間・末尾のいずれにも利用できます。
- パターンの最初・中間に`/`がある場合、`.gitignore`ファイル自身からの相対パスのパターンを示します。そうでない場合、`.gitignore`ファイルより下位のすべてのサブディレクトリのパターンにマッチします。
- パターンの最後に`/`がある場合、そのパターンはディレクトリのみのパターンであることを示します。そうでない場合、ファイルとディレクトリ両方に適用されるパターンを示します。
- 例えば、`doc/frotz/`パターンは、`doc/frotz`ディレクトリにマッチしますが、`a/doc/frotz`ディレクトリにはマッチしません。一方、`frotz/`パターンは`frotz`や`a/frotz`等のディレクトリにマッチします。（全てのパスは、`.gitignore`ファイルからの相対パスで表現されます。）
- アスタリスク`*`はスラッシュ以外のすべてにマッチします。文字`?`は`/`以外のすべての1文字にマッチします。`[a-zA-Z]`等の範囲表現はその範囲内の文字の1文字にマッチします。これらの詳細は、fnmatch(3)やFNM_PATHNAME flagを参照してください。

パス名のすべてにマッチする、連続するアスタリスク`**`は特別な意味を持ちます。

- `**`とそれに続く`/`は全てのディレクトリにマッチすることを意味します。例えば、`**/foo`は全ての`foo`ファイル/ディレクトリにマッチします。これは、単に`foo`と指定したパターンと同じです。また、`**/foo/bar`は、すべてのディレクトリのうち、`foo`ディレクトリ直下の`bar`ファイル/ディレクトリのみにマッチします。
- パターンの最後に`/**`と記載した場合、その内側のすべてにマッチします。例えば、`abc/**`は、`.gitignore`ファイルを基準にして、その直下の`abc`ディレクトリ内のすべてのファイルにマッチします。
- `/**/`パターンは、0個以上のディレクトリにマッチします。例えば、`a/**/b`パターンは、`a/b`、`a/x/b`、`a/x/y/b`等のすべてにマッチします。
- その他の連続するアスタリスクは、通常のアスタリスクと同様に、先述のルールに従って処理されます。

### CONFIGURATION

オプション設定値`core.excludesFile`は、``$GIT_DIR/info/exclude`と同様に、除外するファイル名のパターンを含む無視ファイルのパスを記載します。

### NOTES

gitignoreファイルの目的は、Gitがまだ追跡していない特定のファイルを、追跡しないままにしておくことです。

現在追跡中のファイルをやめたい場合は、`git rm --cached`を使ってインデックスから削除する必要があります。その後、`.gitignore`にパターンを登録することで、のちのコミットで再び追加されることを防ぐことができます。

Gitはワークツリー内の`.gitignore`ファイルにアクセスするとき、シンボリックリンクをたどりません。これにより、ファイルがインデックスまたはツリーからアクセスされた場合とファイルシステムからアクセスされた場合の動作の一貫性を担保しています。

### EXAMPLES

- `hello.*`パターンは、`hello.`で始まる全てのファイル/ディレクトリにマッチします。もし、そのディレクトリ配下のファイルにのみ制限してサブディレクトリのファイルは除外したくない場合は、`/hello.*`のようにスラッシュを前に記述します。このパターンは、`hello.txt`や`hello.c`にマッチしますが、`a/hello.java`にはマッチしません。
- `foo/`パターンは`foo`ディレクトリとその下のパスにマッチしますが、ファイルやシンボリックリンクにはマッチしません。（これは、Gitの一般的なpathspecの振る舞いと同じです。）
- `doc.frotz`パターンと`/doc/frotz`パターンはいかなる`.gitignore`ファイルに記述しても同じように動作します。パターン内に既に`/`を含む場合、先頭の`/`は影響を与えないのです。
- `foo/*`は`foo/test.json`(通常ファイル)と`foo/bar`(ディレクトリ)にマッチしますが、`foo/bar/hello.c`(通常ファイル)にはマッチしません。なぜならば、スラッシュを含む`bar/hello.c`の部分に単一のアスタリスク`*`はマッチしないためです。

--------------------------------------------------------------
    $ git status
    [...]
    # Untracked files:
    [...]
    #       Documentation/foo.html
    #       Documentation/gitignore.html
    #       file.o
    #       lib.a
    #       src/internal.o
    [...]
    $ cat .git/info/exclude
    # ignore objects and archives, anywhere in the tree.
    *.[oa]
    $ cat Documentation/.gitignore
    # ignore generated html files,
    *.html
    # except foo.html which is maintained by hand
    !foo.html
    $ git status
    [...]
    # Untracked files:
    [...]
    #       Documentation/foo.html
    [...]
--------------------------------------------------------------

他の例:

--------------------------------------------------------------
    $ cat .gitignore
    vmlinux*
    $ ls arch/foo/kernel/vm*
    arch/foo/kernel/vmlinux.lds.S
    $ echo '!/vmlinux*' >arch/foo/kernel/.gitignore
--------------------------------------------------------------

2つめの`.gitignore`は、Gitが`arch/foo/kernel/vmlinux.lds.S`を無視しないようにしています。

以下の例では、特定のディレクトリ`foo/bar`以外のすべてを無視しています。（`/*`という表現に注意してください。スラッシュがないと、単一のワイルドカードは`foo/bar`ディレクトリ内のすべてのファイル/ディレクトリも無視してしまいます。）

--------------------------------------------------------------
    $ cat .gitignore
    # exclude everything except directory foo/bar
    /*
    !/foo
    /foo/*
    !/foo/bar
--------------------------------------------------------------

### SEE ALSO

linkgit:git-rm[1],
linkgit:gitrepository-layout[5],
linkgit:git-check-ignore[1]

### GIT

Part of the linkgit:git[1] suite
